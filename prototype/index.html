<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Coffee Derby - UI Prototype</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Nunito', -apple-system, sans-serif;
      background: #FFF8F0;
      min-height: 100vh;
      overflow-x: hidden;
      -webkit-tap-highlight-color: transparent;
    }

    .phone { max-width: 393px; margin: 0 auto; min-height: 100vh; position: relative; }

    .screen {
      display: none;
      min-height: 100vh;
      padding: 24px 20px 80px;
      flex-direction: column;
      animation: fadeIn 0.3s ease;
    }
    .screen.active { display: flex; }
    @keyframes fadeIn { from { opacity:0; transform:translateY(12px); } to { opacity:1; transform:translateY(0); } }

    /* Clay Button */
    .btn {
      padding: 18px 32px;
      font-family: 'Nunito', sans-serif;
      font-weight: 900;
      font-size: 17px;
      border-radius: 20px;
      border: none;
      cursor: pointer;
      width: 100%;
      text-align: center;
      transition: transform 0.12s;
      -webkit-appearance: none;
    }
    .btn:active { transform: translateY(3px); }
    .btn-primary {
      background: linear-gradient(145deg, #A0714F, #8B5E3C);
      color: #FFF8F0;
      box-shadow: 6px 6px 12px rgba(139,94,60,0.35), -3px -3px 8px rgba(255,248,240,0.5), inset 1px 1px 2px rgba(255,255,255,0.2), inset -1px -1px 2px rgba(0,0,0,0.1);
    }
    .btn-secondary {
      background: linear-gradient(145deg, #FFFFFF, #F5E6D3);
      color: #3E2723;
      box-shadow: 6px 6px 12px rgba(139,94,60,0.15), -3px -3px 8px rgba(255,255,255,0.8), inset 1px 1px 2px rgba(255,255,255,0.6), inset -1px -1px 2px rgba(0,0,0,0.05);
    }
    .btn-accent {
      background: linear-gradient(145deg, #FF9F5F, #FF8A3D);
      color: white;
      box-shadow: 6px 6px 12px rgba(255,138,61,0.3), -3px -3px 8px rgba(255,248,240,0.5), inset 1px 1px 2px rgba(255,255,255,0.3), inset -1px -1px 2px rgba(0,0,0,0.1);
    }

    /* Clay Card */
    .card {
      background: linear-gradient(145deg, #FFFFFF, #FBF3EA);
      border-radius: 24px;
      padding: 20px;
      box-shadow: 8px 8px 16px rgba(139,94,60,0.12), -4px -4px 12px rgba(255,255,255,0.8), inset 1px 1px 2px rgba(255,255,255,0.6), inset -1px -1px 2px rgba(0,0,0,0.03);
    }

    /* Clay Input */
    .input {
      width: 100%;
      padding: 16px 20px;
      border-radius: 16px;
      border: none;
      font-family: 'Nunito', sans-serif;
      font-size: 16px;
      font-weight: 700;
      color: #3E2723;
      background: linear-gradient(145deg, #F5E6D3, #FFF8F0);
      box-shadow: inset 3px 3px 6px rgba(139,94,60,0.12), inset -2px -2px 4px rgba(255,255,255,0.7);
      outline: none;
    }
    .input:focus {
      box-shadow: inset 3px 3px 6px rgba(139,94,60,0.18), inset -2px -2px 4px rgba(255,255,255,0.7), 0 0 0 3px rgba(139,94,60,0.15);
    }
    .input::placeholder { color: #A1887F; }

    /* Header */
    .header { display: flex; align-items: center; gap: 12px; margin-bottom: 16px; }
    .back {
      width: 44px; height: 44px; border-radius: 14px; border: none;
      background: linear-gradient(145deg, #FFFFFF, #F5E6D3);
      box-shadow: 4px 4px 8px rgba(139,94,60,0.12), -2px -2px 6px rgba(255,255,255,0.8);
      font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center;
    }
    .back:active { transform: translateY(2px); }
    .title { font-size: 22px; font-weight: 900; color: #3E2723; }

    /* ========== HOME ========== */
    .home { align-items: center; justify-content: center; gap: 12px; background: linear-gradient(180deg, #FFF8F0 0%, #F5E6D3 100%); }
    .home-logo { font-size: 56px; animation: bounce 2s ease infinite; }
    @keyframes bounce { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-10px)} }
    .home-title { font-size: 36px; font-weight: 900; color: #3E2723; text-align: center; }
    .home-sub { font-size: 15px; color: #795548; font-weight: 700; margin-bottom: 24px; }
    .home-btns { width: 100%; display: flex; flex-direction: column; gap: 14px; }
    .home-link { color: #A1887F; font-size: 14px; font-weight: 700; text-decoration: none; margin-top: 12px; }
    .home-animals { display: flex; gap: 6px; font-size: 28px; margin-top: 24px; animation: walk 3s linear infinite; }
    @keyframes walk { 0%{transform:translateX(-20px)} 50%{transform:translateX(20px)} 100%{transform:translateX(-20px)} }

    /* ========== SETUP ========== */
    .setup { gap: 16px; }
    .count-wrap { display: flex; align-items: center; justify-content: center; gap: 24px; }
    .count-btn {
      width: 56px; height: 56px; border-radius: 50%; border: none;
      font-size: 28px; font-weight: 900; color: #3E2723;
      background: linear-gradient(145deg, #FFFFFF, #F5E6D3);
      box-shadow: 5px 5px 10px rgba(139,94,60,0.15), -3px -3px 8px rgba(255,255,255,0.8);
      cursor: pointer; font-family: 'Nunito', sans-serif;
    }
    .count-btn:active { transform: translateY(2px); }
    .count-num { font-size: 56px; font-weight: 900; color: #8B5E3C; width: 80px; text-align: center; }
    .count-label { text-align: center; font-size: 14px; font-weight: 700; color: #795548; margin-top: -4px; }
    .names { display: flex; flex-direction: column; gap: 10px; }
    .name-row { display: flex; align-items: center; gap: 10px; }
    .name-emoji { font-size: 28px; width: 40px; text-align: center; }

    /* ========== CHARACTERS ========== */
    .chars { gap: 14px; }
    .badge {
      text-align: center; padding: 12px; border-radius: 16px;
      background: linear-gradient(145deg, #8B5E3C, #A0714F);
      color: white; font-weight: 900; font-size: 16px;
      box-shadow: 4px 4px 8px rgba(139,94,60,0.3);
    }
    .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
    .cell {
      display: flex; flex-direction: column; align-items: center; gap: 4px;
      padding: 14px 8px; border-radius: 20px; border: none; cursor: pointer;
      background: linear-gradient(145deg, #FFFFFF, #FBF3EA);
      box-shadow: 5px 5px 10px rgba(139,94,60,0.1), -3px -3px 6px rgba(255,255,255,0.8);
      transition: all 0.2s; font-family: 'Nunito', sans-serif;
    }
    .cell:active { transform: translateY(2px) scale(0.97); }
    .cell.on {
      background: linear-gradient(145deg, #8B5E3C, #A0714F);
      box-shadow: 5px 5px 10px rgba(139,94,60,0.3);
    }
    .cell.on .cname { color: white; }
    .cell.off { opacity: 0.3; pointer-events: none; }
    .cemoji { font-size: 36px; }
    .cname { font-size: 12px; font-weight: 700; color: #795548; }

    /* ========== GAMES ========== */
    .games { gap: 14px; }
    .tabs { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 4px; }
    .tab {
      padding: 10px 16px; border-radius: 14px; border: none;
      font-family: 'Nunito', sans-serif; font-size: 13px; font-weight: 700;
      white-space: nowrap; cursor: pointer; color: #795548;
      background: linear-gradient(145deg, #FFFFFF, #F5E6D3);
      box-shadow: 3px 3px 6px rgba(139,94,60,0.1), -2px -2px 4px rgba(255,255,255,0.7);
    }
    .tab.on {
      background: linear-gradient(145deg, #8B5E3C, #A0714F);
      color: white; box-shadow: 3px 3px 6px rgba(139,94,60,0.3);
    }
    .glist { display: flex; flex-direction: column; gap: 12px; }
    .gcard {
      display: flex; align-items: center; gap: 14px; padding: 16px; cursor: pointer;
    }
    .gcard:active { transform: translateY(2px) scale(0.98); }
    .gicon {
      font-size: 32px; width: 56px; height: 56px;
      display: flex; align-items: center; justify-content: center;
      border-radius: 16px;
      background: linear-gradient(145deg, #FFF8F0, #F5E6D3);
      box-shadow: inset 2px 2px 4px rgba(139,94,60,0.08);
      flex-shrink: 0;
    }
    .ginfo { flex: 1; }
    .gname { font-size: 16px; font-weight: 900; color: #3E2723; }
    .gdesc { font-size: 13px; font-weight: 600; color: #A1887F; margin-top: 2px; }
    .garrow { font-size: 18px; color: #C4A882; }

    /* ========== PLAY ========== */
    .play { align-items: center; gap: 20px; }
    .pbar { display: flex; justify-content: center; gap: 14px; width: 100%; }
    .pmini { display: flex; flex-direction: column; align-items: center; gap: 3px; }
    .pavatar {
      width: 48px; height: 48px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center; font-size: 24px;
      background: linear-gradient(145deg, #FFFFFF, #F5E6D3);
      box-shadow: 4px 4px 8px rgba(139,94,60,0.12), -2px -2px 4px rgba(255,255,255,0.8);
    }
    .pavatar.turn {
      background: linear-gradient(145deg, #FFB74D, #FFA726);
      box-shadow: 4px 4px 8px rgba(255,152,0,0.3);
    }
    .pname { font-size: 11px; font-weight: 700; color: #795548; }
    .dice-area { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 16px; }
    .dice {
      width: 120px; height: 120px; border-radius: 28px;
      display: flex; align-items: center; justify-content: center;
      font-size: 64px; cursor: pointer; user-select: none;
      background: linear-gradient(145deg, #FFFFFF, #F5E6D3);
      box-shadow: 10px 10px 20px rgba(139,94,60,0.18), -6px -6px 14px rgba(255,255,255,0.8), inset 2px 2px 4px rgba(255,255,255,0.6);
      transition: transform 0.2s;
    }
    .dice.shake { animation: dshake 0.1s infinite; }
    @keyframes dshake { 0%{transform:rotate(0) scale(1.05)} 25%{transform:rotate(8deg) scale(1.05)} 50%{transform:rotate(0) scale(1.08)} 75%{transform:rotate(-8deg) scale(1.05)} 100%{transform:rotate(0) scale(1.05)} }
    .dice-msg { font-size: 16px; font-weight: 700; color: #A1887F; }
    .scores { width: 100%; display: flex; flex-direction: column; gap: 8px; }
    .srow {
      display: flex; align-items: center; gap: 10px; padding: 10px 16px; border-radius: 14px;
      background: linear-gradient(145deg, #FFFFFF, #FBF3EA);
      box-shadow: 3px 3px 6px rgba(139,94,60,0.08), -2px -2px 4px rgba(255,255,255,0.7);
    }
    .semoji { font-size: 22px; }
    .sname { flex: 1; font-weight: 700; font-size: 14px; color: #3E2723; }
    .sval { font-weight: 900; font-size: 20px; color: #8B5E3C; }

    /* ========== RESULT ========== */
    .result { align-items: center; gap: 14px; }
    .rtitle { font-size: 26px; font-weight: 900; color: #3E2723; margin: 8px 0; }
    .rlist { width: 100%; display: flex; flex-direction: column; gap: 12px; }
    .rrow { display: flex; align-items: center; gap: 14px; padding: 14px 18px; }
    .rrank {
      width: 32px; height: 32px; border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-weight: 900; font-size: 15px; color: white;
    }
    .r1 { background: linear-gradient(145deg, #FFD54F, #FFB300); box-shadow: 3px 3px 6px rgba(255,179,0,0.3); }
    .r2 { background: linear-gradient(145deg, #E0E0E0, #BDBDBD); box-shadow: 3px 3px 6px rgba(0,0,0,0.1); }
    .r3 { background: linear-gradient(145deg, #FFAB91, #FF8A65); box-shadow: 3px 3px 6px rgba(255,138,101,0.3); }
    .rlast { background: linear-gradient(145deg, #EF9A9A, #E57373); box-shadow: 3px 3px 6px rgba(229,115,115,0.3); }
    .ravatar { font-size: 32px; }
    .rinfo { flex: 1; }
    .rnm { font-weight: 900; font-size: 16px; color: #3E2723; }
    .rsc { font-size: 13px; font-weight: 600; color: #A1887F; }
    .loser-box {
      width: 100%; text-align: center; padding: 24px; border-radius: 24px;
      background: linear-gradient(145deg, #FFEBEE, #FFCDD2);
      box-shadow: 6px 6px 12px rgba(229,115,115,0.2), -3px -3px 8px rgba(255,255,255,0.6);
    }
    .loser-emoji { font-size: 48px; animation: bounce 1s ease infinite; }
    .loser-text { font-size: 22px; font-weight: 900; color: #C62828; margin-top: 8px; }
    .loser-sub { font-size: 14px; font-weight: 700; color: #E57373; margin-top: 4px; }
    .rbtns { width: 100%; display: flex; flex-direction: column; gap: 10px; margin-top: 8px; }

    /* Nav */
    .nav {
      position: fixed; bottom: 12px; left: 50%; transform: translateX(-50%);
      display: flex; gap: 8px; align-items: center; z-index: 100;
      background: rgba(255,248,240,0.95); padding: 8px 16px; border-radius: 20px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.1);
    }
    .dot {
      width: 10px; height: 10px; border-radius: 50%; border: none; padding: 0;
      background: #D7CCC8; cursor: pointer; transition: all 0.2s;
    }
    .dot.on { background: #8B5E3C; width: 28px; border-radius: 5px; }
    .nlabel { font-size: 10px; font-weight: 700; color: #A1887F; margin-left: 6px; }

    .spacer { flex: 1; }
  </style>
</head>
<body>
<div class="phone">

  <!-- HOME -->
  <div class="screen home active" id="s-home">
    <div class="spacer"></div>
    <div class="home-logo">&#9749;</div>
    <h1 class="home-title">Coffee Derby</h1>
    <p class="home-sub">동물 친구들과 커피내기 한 판!</p>
    <div class="home-btns">
      <button class="btn btn-primary" onclick="go('setup')">&#128241;  한 폰으로 같이!</button>
      <button class="btn btn-accent" onclick="go('setup')">&#128242;  각자 폰으로!</button>
    </div>
    <a href="#" class="home-link">게임 방법 보기</a>
    <div class="home-animals">
      <span>&#128049;</span><span>&#128054;</span><span>&#128048;</span><span>&#128059;</span><span>&#129418;</span><span>&#128060;</span>
    </div>
    <div class="spacer"></div>
  </div>

  <!-- SETUP -->
  <div class="screen setup" id="s-setup">
    <div class="header">
      <button class="back" onclick="go('home')">&#8592;</button>
      <h2 class="title">몇 명이야 해?</h2>
    </div>
    <div class="card">
      <div class="count-wrap">
        <button class="count-btn" onclick="cnt(-1)">&#8722;</button>
        <div class="count-num" id="cnum">4</div>
        <button class="count-btn" onclick="cnt(1)">+</button>
      </div>
      <p class="count-label">명</p>
    </div>
    <div class="names">
      <div class="name-row"><span class="name-emoji">&#128049;</span><input class="input" placeholder="Player 1"></div>
      <div class="name-row"><span class="name-emoji">&#128054;</span><input class="input" placeholder="Player 2"></div>
      <div class="name-row"><span class="name-emoji">&#128048;</span><input class="input" placeholder="Player 3"></div>
      <div class="name-row"><span class="name-emoji">&#128059;</span><input class="input" placeholder="Player 4"></div>
    </div>
    <div class="spacer"></div>
    <div style="display:flex;flex-direction:column;gap:10px;">
      <button class="btn btn-secondary" onclick="go('chars')">&#127922; 동물 직접 선택</button>
      <button class="btn btn-primary" onclick="go('games')">&#10024; 랜덤 배정 + 바로 시작!</button>
    </div>
  </div>

  <!-- CHARACTERS -->
  <div class="screen chars" id="s-chars">
    <div class="header">
      <button class="back" onclick="go('setup')">&#8592;</button>
      <h2 class="title">동물 선택</h2>
    </div>
    <div class="badge">&#128049; Player 1 차례</div>
    <div class="grid">
      <button class="cell on" onclick="sel(this)"><span class="cemoji">&#128049;</span><span class="cname">고양이</span></button>
      <button class="cell" onclick="sel(this)"><span class="cemoji">&#128054;</span><span class="cname">강아지</span></button>
      <button class="cell" onclick="sel(this)"><span class="cemoji">&#128048;</span><span class="cname">토끼</span></button>
      <button class="cell" onclick="sel(this)"><span class="cemoji">&#128059;</span><span class="cname">곰</span></button>
      <button class="cell" onclick="sel(this)"><span class="cemoji">&#129418;</span><span class="cname">여우</span></button>
      <button class="cell" onclick="sel(this)"><span class="cemoji">&#128060;</span><span class="cname">판다</span></button>
      <button class="cell" onclick="sel(this)"><span class="cemoji">&#128039;</span><span class="cname">펭귄</span></button>
      <button class="cell" onclick="sel(this)"><span class="cemoji">&#128057;</span><span class="cname">햄스터</span></button>
      <button class="cell" onclick="sel(this)"><span class="cemoji">&#129417;</span><span class="cname">부엉이</span></button>
      <button class="cell" onclick="sel(this)"><span class="cemoji">&#129409;</span><span class="cname">사자</span></button>
      <button class="cell" onclick="sel(this)"><span class="cemoji">&#128040;</span><span class="cname">코알라</span></button>
      <button class="cell" onclick="sel(this)"><span class="cemoji">&#129414;</span><span class="cname">오리</span></button>
    </div>
    <button class="btn btn-secondary" style="font-size:15px;padding:14px;" onclick="go('games')">&#127922; 전체 랜덤 배정</button>
    <div class="spacer"></div>
    <button class="btn btn-primary" onclick="go('games')">게임 선택으로! &#8594;</button>
  </div>

  <!-- GAME SELECT -->
  <div class="screen games" id="s-games">
    <div class="header">
      <button class="back" onclick="go('chars')">&#8592;</button>
      <h2 class="title">게임 선택</h2>
    </div>
    <button class="btn btn-accent" style="font-size:16px;padding:14px;margin-bottom:4px;" onclick="go('play')">&#127922; 랜덤 게임!</button>
    <div class="tabs">
      <button class="tab on" id="tab0" onclick="tabOn(0)">전체</button>
      <button class="tab" id="tab1" onclick="tabOn(1)">&#127939; 경주</button>
      <button class="tab" id="tab2" onclick="tabOn(2)">&#127922; 운</button>
      <button class="tab" id="tab3" onclick="tabOn(3)">&#9889; 스킬</button>
      <button class="tab" id="tab4" onclick="tabOn(4)">&#127914; 파티</button>
    </div>
    <div class="glist">
      <div class="card gcard" onclick="go('play')"><div class="gicon">&#127922;</div><div class="ginfo"><div class="gname">주사위 대결</div><div class="gdesc">주사위를 굴려 승부!</div></div><span class="garrow">&#8250;</span></div>
      <div class="card gcard" onclick="go('play')"><div class="gicon">&#127919;</div><div class="ginfo"><div class="gname">과녁 맞추기</div><div class="gdesc">정확히 과녁 중심을 탭!</div></div><span class="garrow">&#8250;</span></div>
      <div class="card gcard" onclick="go('play')"><div class="gicon">&#127939;</div><div class="ginfo"><div class="gname">달리기 경주</div><div class="gdesc">빨리 탭해서 달려!</div></div><span class="garrow">&#8250;</span></div>
      <div class="card gcard" onclick="go('play')"><div class="gicon">&#128163;</div><div class="ginfo"><div class="gname">폭탄 돌리기</div><div class="gdesc">터지기 전에 넘겨!</div></div><span class="garrow">&#8250;</span></div>
      <div class="card gcard" onclick="go('play')"><div class="gicon">&#9889;</div><div class="ginfo"><div class="gname">반응속도 테스트</div><div class="gdesc">초록빛이면 바로 탭!</div></div><span class="garrow">&#8250;</span></div>
      <div class="card gcard" onclick="go('play')"><div class="gicon">&#129513;</div><div class="ginfo"><div class="gname">동전 던지기</div><div class="gdesc">앞뒤를 맞춰봐!</div></div><span class="garrow">&#8250;</span></div>
    </div>
  </div>

  <!-- GAME PLAY: DICE -->
  <div class="screen play" id="s-play">
    <div class="header" style="width:100%">
      <button class="back" onclick="go('games')">&#8592;</button>
      <h2 class="title">&#127922; 주사위 대결</h2>
    </div>
    <div class="pbar">
      <div class="pmini"><div class="pavatar turn" id="pa0">&#128049;</div><span class="pname">Player 1</span></div>
      <div class="pmini"><div class="pavatar" id="pa1">&#128054;</div><span class="pname">Player 2</span></div>
      <div class="pmini"><div class="pavatar" id="pa2">&#128048;</div><span class="pname">Player 3</span></div>
      <div class="pmini"><div class="pavatar" id="pa3">&#128059;</div><span class="pname">Player 4</span></div>
    </div>
    <div class="dice-area">
      <div class="dice" id="dice" onclick="roll()">&#127922;</div>
      <p class="dice-msg" id="dmsg">탭해서 굴려!</p>
    </div>
    <div class="scores">
      <div class="srow"><span class="semoji">&#128049;</span><span class="sname">Player 1</span><span class="sval" id="v0">-</span></div>
      <div class="srow"><span class="semoji">&#128054;</span><span class="sname">Player 2</span><span class="sval" id="v1">-</span></div>
      <div class="srow"><span class="semoji">&#128048;</span><span class="sname">Player 3</span><span class="sval" id="v2">-</span></div>
      <div class="srow"><span class="semoji">&#128059;</span><span class="sname">Player 4</span><span class="sval" id="v3">-</span></div>
    </div>
  </div>

  <!-- RESULT -->
  <div class="screen result" id="s-result">
    <h2 class="rtitle">&#127942; 결과 발표!</h2>
    <div class="rlist">
      <div class="card rrow"><div class="rrank r1">1</div><span class="ravatar">&#128048;</span><div class="rinfo"><div class="rnm">Player 3</div><div class="rsc">주사위 6</div></div><span style="font-size:20px">&#128081;</span></div>
      <div class="card rrow"><div class="rrank r2">2</div><span class="ravatar">&#128054;</span><div class="rinfo"><div class="rnm">Player 2</div><div class="rsc">주사위 5</div></div></div>
      <div class="card rrow"><div class="rrank r3">3</div><span class="ravatar">&#128059;</span><div class="rinfo"><div class="rnm">Player 4</div><div class="rsc">주사위 3</div></div></div>
      <div class="card rrow"><div class="rrank rlast">4</div><span class="ravatar">&#128049;</span><div class="rinfo"><div class="rnm">Player 1</div><div class="rsc">주사위 1</div></div><span style="font-size:20px">&#9749;</span></div>
    </div>
    <div class="loser-box">
      <div class="loser-emoji">&#128049;&#9749;</div>
      <div class="loser-text">Player 1, 커피 사세요!</div>
      <div class="loser-sub">고양이가 꼴찌를 했어요...</div>
    </div>
    <div class="rbtns">
      <button class="btn btn-primary" onclick="go('play');resetD()">&#128260; 다시하기</button>
      <button class="btn btn-secondary" onclick="go('games')">&#127918; 다른 게임</button>
      <button class="btn btn-secondary" onclick="go('home')">&#127968; 홈으로</button>
    </div>
  </div>

</div>

<!-- NAV -->
<div class="nav">
  <button class="dot on" id="d0" onclick="go('home')"></button>
  <button class="dot" id="d1" onclick="go('setup')"></button>
  <button class="dot" id="d2" onclick="go('chars')"></button>
  <button class="dot" id="d3" onclick="go('games')"></button>
  <button class="dot" id="d4" onclick="go('play')"></button>
  <button class="dot" id="d5" onclick="go('result')"></button>
  <span class="nlabel" id="nl">홈</span>
</div>

<script>
var screens=['home','setup','chars','games','play','result'];
var labels=['홈','인원설정','캐릭터','게임선택','게임진행','결과'];

function go(n){
  screens.forEach(function(s){document.getElementById('s-'+s).classList.remove('active');});
  document.getElementById('s-'+n).classList.add('active');
  for(var i=0;i<6;i++){document.getElementById('d'+i).classList.remove('on');}
  var idx=screens.indexOf(n);
  if(idx>=0){document.getElementById('d'+idx).classList.add('on');document.getElementById('nl').textContent=labels[idx];}
}

var pc=4;
function cnt(d){pc=Math.min(8,Math.max(2,pc+d));document.getElementById('cnum').textContent=pc;}

function sel(el){if(!el.classList.contains('off'))el.classList.toggle('on');}

function tabOn(i){for(var t=0;t<5;t++){document.getElementById('tab'+t).classList.remove('on');}document.getElementById('tab'+i).classList.add('on');}

var faces=['\u2680','\u2681','\u2682','\u2683','\u2684','\u2685'];
var cp=0;

function roll(){
  if(cp>=4)return;
  var d=document.getElementById('dice');
  d.classList.add('shake');
  var c=0;
  var iv=setInterval(function(){
    d.textContent=faces[Math.floor(Math.random()*6)];
    c++;
    if(c>14){
      clearInterval(iv);
      d.classList.remove('shake');
      var r=Math.floor(Math.random()*6)+1;
      d.textContent=faces[r-1];
      document.getElementById('v'+cp).textContent=r;
      for(var i=0;i<4;i++)document.getElementById('pa'+i).classList.remove('turn');
      cp++;
      if(cp<4){
        document.getElementById('pa'+cp).classList.add('turn');
        document.getElementById('dmsg').textContent='Player '+(cp+1)+' 차례!';
      }else{
        document.getElementById('dmsg').textContent='결과 확인!';
        setTimeout(function(){go('result');},1200);
      }
    }
  },60);
}

function resetD(){
  cp=0;
  for(var i=0;i<4;i++){document.getElementById('v'+i).textContent='-';document.getElementById('pa'+i).classList.remove('turn');}
  document.getElementById('pa0').classList.add('turn');
  document.getElementById('dice').textContent='\uD83C\uDFB2';
  document.getElementById('dmsg').textContent='탭해서 굴려!';
}
</script>
</body>
</html>
